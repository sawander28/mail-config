# -*- mode: sh -*-

[DEFAULT]
include = cat /usr/local/lib/mr/stow

lib =
  error(){ printf "\033[1m\033[31mERROR: $@\033[m\n"; exit 1; }
  warning(){ printf "\033[1m\033[1;33mWARNING: $@\033[m\n"; }
  info(){ printf "\033[1m\033[33m $@\033[m\n"; }
  hostname="$(hostname)"
  whoami="$(whoami)"
  anon(){
    ( GIT_CONFIG_HOME=$HOME/.git/config remote.origin.url || \
      cat .git/remotes/origin ) | grep -q 'git://'
  }
  on(){
    for host in "$@"; do
		  if [ "${host%@*}" != "${host#*@}" ]; then
			  if [ "$whoami" != "${host%@*}" ]; then
				  continue
				fi
				host="${host#*@}"
			fi
			if [ "$hostname" = "$host" ]; then
				return 0
			fi
		done
		return 1
	}
	myworkstation() {
		on wandsas@z620
	}


[$HOME/repos/wandsas/mr]
name = mr-config
order = 1
checkout = git clone git@rpi3.local:repos/mr-config.git
post_checkout =
  cd "MR_REPO && git remote add github git@github.com:sawander/mr-config.git
# This loads repos/wandsas/mr/.mrconfig
chain = true
fixups =
  ln -sf "$MR_REPO/home-mrconfig" ~/.mrconfig
  ln -sf "$MR_REPO/.stow-global-ignore" ~

[$HOME/repos/wandsas/shell-env]
checkout = git clone git@rpi3.local:repos/shell-env.git
stowable = true
remote = git remote add github ssh://git@github.com/sawander/shell-env.git

[$HOME/repos/wandsas/mail]
checkout = git clone git@rpi3.local:repos/mail.git
remote = git remote add github ssh://git@github.com/sawander/mail.git
stowable = true
skip = ! myworkstation

[$HOME/repos/wandsas/vim]
checkout = git clone git@rpi3.local:repos/vim.git
remote = git remote add github ssh://git@github.com/sawander/vim.git
stowable = true

[$HOME/repos/wandsas/sway-desktop]
checkout = git clone git@rpi3.local:repos/sway-desktop.git
stowable = true

[$HOME/repos/wandsas/xorg-desktop]
checkout = git clone git@rpi3.local:repos/xwayland-desktop.git
stowable = true
skip = true

[$HOME/repos/wandsas/mygit]
checkout = git clone git@rpi3.local:repos/mygit.git
stowable = true

[$HOME/repos/wandsas/portage]
checkout = git clone git@rpi3.local:repos/portage.git
skip = lazy


# vim: fenc=utf-8 ft=dosini ts=2 sts=2 sw=2 et
