# -*- mode: sh -*-

#
# 20. Cmdline apps repositories group
#

[$HOME/repos/cmdline/stow]
name = stow-release
checkout = git clone https://git.savannah.gnu.org/git/stow.git
fixups =
    cd $MR_REPO
    [ -f configure ] || autoreconf -fi 
    ./configure --prefix=$HOME/.local/share
    make install
skip = true

[$HOME/repos/cmdline/myrepos]
checkout = git clone ssh://git@rpi3.local/repos/myrepos.git
remote = git remote add upstream git://myrepos.branchable.com
fixups = cd $MR_REPO && make PREFIX=/usr/local install && info "Installed $STOW_NAME"

[$HOME/repos/cmdline/kitenet-mr]
checkout = git clone ssh://git@rpi3.local/repos/kitenet-mr.git
remote = git remote add upstream git@github.com/aspiers/kitenet-mr.git
fixups = make PREFIX=/usr/local install && info "Installed $MR_CONFIG)"
skip = true

[$HOME/repos/cmdline/push]
checkout = git clone https://github.com/vaeth/push.git
fixups = cd $MR_REPO && make clean && make PREFIX=/usr/local install
skip = true

[$HOME/repos/cmdline/extrace]
checkout = git clone ssh://git@rpi3.local/repos/extrace.git
remote = git remote add upstream https://github.com/leahneukirchen/extrace.git
clean = rm -f /usr/local/bin/{extrace,pwait}
remote = git_add_remote rpi3 git@rpi3.local:repos/extrace.git
fixups = make install && info "Compiled $STOW_NAME"

[$HOME/repos/cmdline/xe]
checkout = git clone ssh://git@rpi3.local/repos/xe.git
remotes = git_add_remote upstream https://github.com/leahneukirchen/xe.git
fixups = make clean install && info "Installed $STOW_NAME"

[$HOME/repos/cmdline/logcatch]
checkout = git clone ssh://git@rpi3.local/repos/logcatch.git
remotes = git remote add upstream https://github.com/leahneukirchen/logcatch.git
fixups =  make install && info "Installed $STOW_NAME"

[$HOME/repos/themes/fonts/nerd-fonts]
name = getnf
checkout =
  [ -d $MR_REPO ] || info "Create $MR_REPO"
  mkdir -p $MR_REPO && cd $MR_REPO
  curl -LO https://raw.githubusercontent.com/getnf/getnf/main/getnf
update = :
fixups = install -m 755 getnf /usr/local/bin && info "Installed $MR_NAME"

[$HOME/repos/kernel/get-verified-tarball]
name = get-verified-tarball
checkout =
  info "$MR_REPO"
  [ -d $MR_REPO ] || info "Create $MR_REPO"
  mkdir -p $MR_REPO && cd $MR_REPO
  curl -LO https://web.git.kernel.org/pub/scm/linux/kernel/git/mricon/korg-helpers.git/plain/get-verified-tarball
update = :
fixups = 
  install -m 755 get-verified-tarball /usr/local/bin
  info "Installed $MR_NAME"

[$HOME/repos/cmdline/direnv]
name = direnv
checkout =
  [ -d $MR_REPO ] || info "Create $MR_REPO"
  mkdir -p $MR_REPO && cd $MR_REPO
  curl -LO https://raw.githubusercontent.com/direnv/direnv/refs/heads/master/install.sh
update = :
fixups =
  bin_path=/usr/local/bin
  sh install.sh

# vim: fenc=utf-8 ft=dosini ts=2 sts=2 sw=2 et
